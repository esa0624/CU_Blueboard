<% content_for :body_class, "login-page" %>
<%= stylesheet_link_tag "login", "data-turbo-track": "reload" %>

<style>
  .login-main-content {
    background-image: url('<%= asset_path 'backgrounds/columbia_alma_mater.jpg' %>');
  }
</style>

<%# app/views/devise/sessions/new.html.erb %>

<div class="login-page-wrapper">
  
  <header class="login-header">
    <a href="<%= unauthenticated_root_path %>" class="logo-link">
      <div class="header-logo-group">
        <%= image_tag 'logos/cubb_owl.jpg', alt: 'CU BlueBoard Logo', class: 'logo-owl' %>
        <div class="logo-text">
          <span class="logo-main-text">CU BlueBoard</span>
          <span class="logo-sub-text">Columbia & Barnard</span>
        </div>
      </div>
    </a>
    <nav class="header-nav">
      <%= link_to 'Honor Code', honor_code_path %>
      <%= link_to 'Terms', terms_path %>
    </nav>
  </header>

  <main class="login-main-content">
    <div class="login-form-box">
      
      <h2 class="login-title">LOG IN WITH UNIVERSITY SSO</h2>

      <% if flash[:alert].present? %>
        <div class="login-error-message">
          <%= flash[:alert] %>
        </div>
      <% end %>
      
      <%= button_to user_google_oauth2_omniauth_authorize_path,
              method: :post,
              data: { turbo: "false" },
              class: "btn-sso-login" do %>

        <%= image_tag 'icons/crown.png', alt: 'Verified', class: 'icon-crown' %>
        <span>
          Only for Columbia and Barnard<br>Students & Faculty
        </span>
      <% end %>
      
      <!-- Test Login Buttons -->
      <div style="margin-top: 24px; display: flex; flex-direction: column; gap: 12px; width: 100%;">
        <%= button_to test_login_student_path, method: :post, class: "btn-sso-login", style: "background-color: #6c757d; color: white;" do %>
          <span>Test as User</span>
        <% end %>
        
        <%= button_to test_login_moderator_path, method: :post, class: "btn-sso-login", style: "background-color: #6c757d; color: white;" do %>
          <span>Test as Moderator</span>
        <% end %>
      </div>

      <p class="agreement-text">
        By signing in, you agree to our
        <%= link_to 'Honor Code', honor_code_path, target: '_blank' %> and
        <%= link_to 'Terms of Service', terms_path, target: '_blank' %>.
      </p>
    </div>
    
    <div class="login-sub-links">
      <%# 链接已注释 %>
    </div>
  </main>

  <footer class="login-footer">
    <%# ... your Footer HTML ... %>
  </footer>
</div>